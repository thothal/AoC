<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />

    
    
    <title>Task 1</title>

        <script src="task1_files/header-attrs-2.10/header-attrs.js"></script>
        <script src="task1_files/jquery-1.11.3/jquery.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="task1_files/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" />
        <script src="task1_files/bootstrap-3.3.7/js/bootstrap.min.js"></script>
        <script src="task1_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
        <script src="task1_files/navigation-1.1/tabsets.js"></script>
        <link href="task1_files/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
        <script src="task1_files/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
        <link href="task1_files/downcute-0.1/downcute.css" rel="stylesheet" />
        <link href="task1_files/downcute-0.1/downcute_fonts_embed.css" rel="stylesheet" />
        <script src="task1_files/downcute-0.1/downcute_styles.js"></script>
        <script src="task1_files/downcute-0.1/downcute.js"></script>
        <script src="task1_files/prism-1.22/prism.js"></script>
    
    
    
    
    <!-- tabsets -->
    <script>
      $(document).ready(function () {
	  window.buildTabsets("toc");
      });
      $(document).ready(function () {
	  $('.tabset-dropdown > .nav-tabs > li').click(function () {
	      $(this).parent().toggleClass('nav-tabs-open')
	  });
      });
    </script>

    <!-- code folding -->
    
    <!-- code download -->
    
    <!-- tabsets dropdown -->

    <style type="text/css">
      .tabset-dropdown > .nav-tabs {
	  display: inline-table;
	  max-height: 500px;
	  min-height: 44px;
	  overflow-y: auto;
	  background: white;
	  border: 1px solid #ddd;
	  border-radius: 4px;
      }
      
      .tabset-dropdown > .nav-tabs > li.active:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
	  content: "&#xe258;";
	  border: none;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs > li.active {
	  display: block;
      }

      .tabset-dropdown > .nav-tabs > li.active a {
  	  padding: 0 15px !important;
      }

      .tabset-dropdown > .nav-tabs > li > a,
      .tabset-dropdown > .nav-tabs > li > a:focus,
      .tabset-dropdown > .nav-tabs > li > a:hover {
	  border: none;
	  display: inline-block;
	  border-radius: 4px;
	  background-color: transparent;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li {
	  display: block;
	  float: none;
      }
      
      .tabset-dropdown > .nav-tabs > li {
	  display: none;
	  margin-left: 0 !important;
      }
    </style>
    
</head>

<body class="preload">

   	
               <!-- downcute start -->   
   <div id="docute" class="Root theme-default">
     <div class="Page layout-narrow">
      <div class="Wrap">
        <div class="Sidebar">
          <div class="SidebarItems" id="toc">
            <ul>
            <li><a href="#preamble"><span class="toc-section-number">1</span> Preamble</a></li>
            <li><a href="#setup"><span class="toc-section-number">2</span> Setup</a>
            <ul>
            <li><a href="#libraries"><span class="toc-section-number">2.1</span> Libraries</a></li>
            <li><a href="#retrieve-data-from-aoc"><span class="toc-section-number">2.2</span> Retrieve Data from <tt>AoC</tt></a></li>
            </ul></li>
            <li><a href="#puzzle-day-1"><span class="toc-section-number">3</span> Puzzle Day 1</a>
            <ul>
            <li><a href="#part-1"><span class="toc-section-number">3.1</span> Part 1</a></li>
            <li><a href="#part-2"><span class="toc-section-number">3.2</span> Part 2</a></li>
            </ul></li>
            </ul>
          </div>
          <div data-position="sidebar:post-end" class="InjectedComponents"><div class="dark-theme-toggler"><div class="toggle "><div class="toggle-track"><div class="toggle-track-check"><img  src="data:image/png;base64,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" role="presentation" style="pointer-events: none;" width="16" height="16"></div> <div class="toggle-track-x"><img src="data:image/png;base64,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" role="presentation" style="pointer-events: none;" width="16" height="16"></div></div> <div class="toggle-thumb"></div></div> <input type="checkbox" aria-label="Switch between Dark and Default theme" class="toggler-screen-reader-only"></div></div>
        </div>
        <div class="Main">
          <div class="Content" id="content"> 
   
   
        
      <h1 class="title">Task 1</h1>
      
      <p class="authors">
           <span class="glyphicon glyphicon-user"></span> Thorn Thaler
                - <a href="mailto:thorn.thaler@thothal.at" class="email">thorn.thaler@thothal.at</a><
          <br>
      </p>
         <p class="date"><span class="glyphicon glyphicon-calendar"></span> 2021-12-2</p>
           

   
      
   
<!-- Don't indent these lines or it will mess pre blocks indentation --> 
<div class="page-content has-page-title">
<style type="text/css">
.page-content  .figure {
  width: 100%;
}

.day-desc {
  border: 2px dotted;
  border-radius: 6px;
  border-color: var(--blockquote-border-color);
  padding: 0 20px;
}
</style>
<div id="preamble" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Preamble</h1>
<p>A tweet in my timeline called my attention to <a href="https://adventofcode.com/" class="uri">https://adventofcode.com/</a><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. So I thought I give it a try.</p>
<p>To spice things up, we want to do <strong>everything</strong> in R, that is also getting the task from
the webpage, downloading the data and so on. Thus, we will use library
<a href="https://httr.r-lib.org/"><code>httr</code></a> <del>to deal with the authentication and retrieval of the
needed data</del> and use the session cookie, whose value I shamelessly copied &amp; pasted from a
manual login.</p>
</div>
<div id="setup" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Setup</h1>
<div id="libraries" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Libraries</h2>
<p>First we need to load the required libraries.</p>
<pre class="r"><code>library(httr)
library(xml2)
library(magrittr)
library(tibble)
library(zoo)
library(glue)
library(fontawesome)</code></pre>
</div>
<div id="retrieve-data-from-aoc" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Retrieve Data from <tt>AoC</tt></h2>
<div id="initial-plan" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Initial Plan</h3>
<p>Here I need to go farther back. When you look at <tt>AoC</tt> you see that the
authentication is delegated to either of the following popular services using the <a href="https://en.wikipedia.org/wiki/OAuth">OAuth protocol</a>.</p>
<div class="figure">
<img src="images/Login-Options.png" alt="" />
<p class="caption">Login Options for <tt>AoC</tt></p>
</div>
<p>I am everything but an expert when it comes to server communication, so I did my research
to look for the API specifications to understand the requests which are exchanged in the
process of authentication:</p>
<ul>
<li><a href="https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps"><svg aria-hidden="true" role="img" viewBox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> GitHub</a></li>
<li><a href="https://developers.google.com/identity/protocols/oauth2"><svg aria-hidden="true" role="img" viewBox="0 0 488 512" style="height:1em;width:0.95em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg> Google</a></li>
<li><a href="https://developer.twitter.com/en/docs/authentication/overview"><svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> Twitter</a></li>
<li><a href="https://www.reddit.com/dev/api/oauth/"><svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"/></svg>Reddit</a></li>
</ul>
<p>I decided to use my <a href="https://github.com/thothal">GitHub account</a> for this
purpose.</p>
<p>At first with my very superficial understanding, I thought <code>httr::oauth2.0_token</code> would
handle the authentication for me. But right after reading the documentation, I realized
that I am missing some information (like the client id or even more importantly the
client secret). Yet I did not give up. I logged in manually to <tt>AoC</tt> and was
redirected (as per <tt>OAuth</tt> protocol) to a GitHub login page:</p>
<div class="figure">
<img src="images/GitHub-Login.png" alt="" />
<p class="caption">GitHub Login Page</p>
</div>
<p>As I knew already from the API docs, the first step was to send a <tt>GET</tt> request to
<a href="https://github.com/login/oauth/authorize" class="uri">https://github.com/login/oauth/authorize</a> containing - inter alia - the <tt>client_id</tt>
and a <tt>redirect_uri</tt>. <tt>GET</tt> requests mean that the query parameters are
simply appended to the URL, so I could simply get the <tt>client_id</tt> from the
navigation bar<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> and I found
the relevant <tt>client_id</tt>:
<tt>https<!-- use to break the link -->://github.com/login?client_id=7bb0a7ec13388aa67963&amp;[…]</tt>.
With this piece of information and still no deep understanding of the “dance” I simply
tried to set up an authentication as per the
<a href="https://github.com/r-lib/httr/blob/main/demo/oauth2-github.r">demo of httr</a> (silently
ignoring that I still had no client secret 🙈):</p>
<pre class="r"><code>myapp &lt;- oauth_app(&quot;github&quot;,
  key = &quot;7bb0a7ec13388aa67963&quot;
)
github_token &lt;- oauth2.0_token(oauth_endpoints(&quot;github&quot;), myapp)</code></pre>
<p>My first enthusiasm yielded quickly to disillusion. While this approach was properly
opening the login page, the redirect did not work and in the <tt>GET</tt> parameters I
also saw why:</p>
<div class="figure">
<img src="images/URI-Mismatch.png" alt="" />
<p class="caption">URI must match the registerd callback URL</p>
</div>
<p>I learned, that I can not redirect the request to my localhost, which would be needed to
proceed with the next step (the API told me that I should receive a temporary code). I
guess that this safety measure is a good thing such that you cannot simply redirect the
process.</p>
<p>Anyways, my interest was sparked and I wanted at least to understand the dance. And of
course I still wanted to follow this route to login to <tt>AoC</tt>. I quickly drafted a
<a href="https://stackoverflow.com/questions/70206455/log-in-a-webpage-which-uses-github-oauth">StackOverflow
question</a>
asking for help for the overall goal. Here’s what I did in more detail:</p>
<p>First, I set quickly set up a test OAuth App in my GitHub account:</p>
<div class="figure">
<img src="images/OAuth-App-GitHub.png" alt="" />
<p class="caption">OAuth App in GitHub</p>
</div>
<p>This time I got both the client id <em>and</em> the client secret. Hooray!</p>
<div class="figure">
<img src="images/OAuth-App-Credentials.png" alt="" />
<p class="caption">OAuth App Credentials</p>
</div>
<p>Time to start the “dance”! As a warm-up we can do that easily using
<code>httr::oauth2.0_token</code> as per the <a href="https://github.com/r-lib/httr/blob/main/demo/oauth2-github.r">demo</a>:</p>
<pre class="r"><code>client_id &lt;- &quot;f6385d144d7ac17b83df&quot;
client_secret &lt;- keyring::key_get(&quot;OAUth_Test_Client-Secret&quot;) ## sorry folks ;)
myapp &lt;- oauth_app(&quot;test_oauth&quot;,
                   key = client_id,
                   secret = client_secret)
github_token &lt;- oauth2.0_token(oauth_endpoints(&quot;github&quot;), myapp)
gtoken &lt;- config(token = github_token)
GET(&quot;https://api.github.com/rate_limit&quot;, gtoken)</code></pre>
<pre><code>## Response [https://api.github.com/rate_limit]
##   Date: 2021-12-03 11:57
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 1.07 kB
## {
##   &quot;resources&quot;: {
##     &quot;core&quot;: {
##       &quot;limit&quot;: 5000,
##       &quot;used&quot;: 0,
##       &quot;remaining&quot;: 5000,
##       &quot;reset&quot;: 1638536262
##     },
##     &quot;search&quot;: {
##       &quot;limit&quot;: 30,
## ...</code></pre>
<p>Worked pretty smooth, didn’t it? Yet I wanted to understand each part of the dance. Thus,
instead of relying on the blackbox <code>oauth2.o_token</code> I constructed all the necessary calls
separately which helped me to finally understand (or so I think) what is going on under
the hood:</p>
<pre class="r"><code>base_url &lt;- &quot;https://github.com&quot;
path &lt;- &quot;login/oauth/{end_point}&quot;
## oauth_callback() --&gt; http://localhost:1410/
url &lt;- modify_url(base_url,
                  path = glue(path, end_point = &quot;authorize&quot;),
                  query = list(client_id = client_id,
                               redirect_uri = oauth_callback()))
## This opens a web browser pointing to the url and 
## opens a webserver on port 1410 to listen to the response. 
code &lt;- oauth_listener(url)

## Provide credentials in the spawned browser
access_token &lt;- POST(modify_url(base_url, 
                                path = glue(path, end_point = &quot;access_token&quot;)),
                     add_headers(Accept = &quot;application/json&quot;),
                     body = list(client_id = client_id,
                                 client_secret = client_secret,
                                 code = code$code))
GET(&quot;https://api.github.com/rate_limit&quot;, 
    add_headers(Authorization = paste(content(access_token)$access_token,
                                      &quot;OAUTH-TOKEN&quot;)))</code></pre>
<pre><code>## Response [https://api.github.com/rate_limit]
##   Date: 2021-12-03 13:16
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 1.03 kB
## {
##   &quot;resources&quot;: {
##     &quot;core&quot;: {
##       &quot;limit&quot;: 60,
##       &quot;used&quot;: 0,
##       &quot;remaining&quot;: 60,
##       &quot;reset&quot;: 1638541014
##     },
##     &quot;search&quot;: {
##       &quot;limit&quot;: 10,
## ...</code></pre>
<p>Booom! My key take away messages from here:</p>
<ol style="list-style-type: decimal">
<li>You need a web server to participate in the dance (<tt>https<!---->://localhost</tt>
is just fine).</li>
<li>You cannot (at least for GitHub authentication) redirect the response form the
authorize service but to the callback URL.</li>
<li>Because you cannot redirect the response with the code, you can authenticate only
at the service defined by the callback URL.</li>
<li>Thus, you <strong>cannot</strong> remotely authenticate via a script. Full stop.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></li>
</ol>
<p>While this helped tremendously to understand the <tt>OAuth</tt> protocol it did
not help a bit to extract the data via script as I could not log on.</p>
<p>I was just about to give up, when I made a last Google search on
<tt>how to login curl adventofcode</tt> and I found <a href="https://github.com/wimglenn/advent-of-code-data">this gem</a>. A python library to download the
<tt>AoC</tt> data. But how the heck did they manage to authenticate? And here’s where the
pieces fall into place. I learned that all I have to do is to</p>
<ol style="list-style-type: decimal">
<li>Log on <tt>AoC</tt> manually.</li>
<li>Get the <a href="https://github.com/wimglenn/advent-of-code-wim/issues/1">session cookie</a>.</li>
<li>Eventually use the session cookie to authenticate our requests.</li>
</ol>
<p>Et voilà. Quite some trial and error until I found out that the solution is rather easy.
But as always, I learned an awful lot.</p>
</div>
<div id="final-solution" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Final Solution</h3>
<pre class="r"><code>session_cookie &lt;- set_cookies(session = keyring::key_get(&quot;AoC-GitHub-Cookie&quot;))
puzzle_1 &lt;- GET(&quot;https://adventofcode.com/2021/day/1&quot;,
                session_cookie) %&gt;% 
  content(encoding = &quot;UTF-8&quot;) %&gt;% 
  xml_find_all(&quot;///article&quot;) %&gt;% 
  lapply(as.character)

data_1 &lt;- GET(&quot;https://adventofcode.com/2021/day/1/input&quot;,
              session_cookie) %&gt;% 
  content(encoding = &quot;UTF-8&quot;) %&gt;% 
  read.table(text = .) %&gt;% 
  as_tibble() %&gt;% 
  set_names(&quot;depth&quot;)</code></pre>
</div>
</div>
</div>
<div id="puzzle-day-1" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Puzzle Day 1</h1>
<div id="part-1" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Part 1</h2>
<div id="description" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Description</h3>
<article class="day-desc">
<h2>
— Day 1: Sonar Sweep —
</h2>
<p>
You’re minding your own business on a ship at sea when the overboard alarm goes off! You rush to see if you can help. Apparently, one of the Elves tripped and accidentally sent the sleigh keys flying into the ocean!
</p>
<p>
Before you know it, you’re inside a submarine the Elves keep ready for situations like this. It’s covered in Christmas lights (because of course it is), and it even has an experimental antenna that should be able to track the keys if you can boost its signal strength high enough; there’s a little meter that indicates the antenna’s signal strength by displaying 0-50 <em class="star">stars</em>.
</p>
<p>
Your instincts tell you that in order to save Christmas, you’ll need to get all <em class="star">fifty stars</em> by December 25th.
</p>
<p>
Collect stars by solving puzzles. Two puzzles will be made available on each day in the Advent calendar; the second puzzle is unlocked when you complete the first. Each puzzle grants <em class="star">one star</em>. Good luck!
</p>
<p>
As the submarine drops below the surface of the ocean, it automatically performs a sonar sweep of the nearby sea floor. On a small screen, the sonar sweep report (your puzzle input) appears: each line is a measurement of the sea floor depth as the sweep looks further and further away from the submarine.
</p>
<p>
For example, suppose you had the following report:
</p>
<pre><code>199
200
208
210
200
207
240
269
260
263
</code></pre>
<p>
This report indicates that, scanning outward from the submarine, the sonar sweep found depths of <code>199</code>, <code>200</code>, <code>208</code>, <code>210</code>, and so on.
</p>
<p>
The first order of business is to figure out how quickly the depth increases, just so you know what you’re dealing with - you never know if the keys will get <span title="Does this premise seem fishy to you?">carried into deeper water</span> by an ocean current or a fish or something.
</p>
<p>
To do this, count <em>the number of times a depth measurement increases</em> from the previous measurement. (There is no measurement before the first measurement.) In the example above, the changes are as follows:
</p>
<pre><code>199 (N/A - no previous measurement)
200 (<em>increased</em>)
208 (<em>increased</em>)
210 (<em>increased</em>)
200 (decreased)
207 (<em>increased</em>)
240 (<em>increased</em>)
269 (<em>increased</em>)
260 (decreased)
263 (<em>increased</em>)
</code></pre>
<p>
In this example, there are <em><code>7</code></em> measurements that are larger than the previous measurement.
</p>
<p>
<em>How many measurements are larger than the previous measurement?</em>
</p>
</article>
</div>
<div id="solution" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Solution</h3>
<p>We need to count how often the depth measurement increases, which breaks down to counting
the positive signs of the differences of consecutive numbers:</p>
<pre class="r"><code>sgn_a &lt;- data_1$depth %&gt;% 
  diff()
sum(sgn_a &gt; 0)</code></pre>
<pre><code>## [1] 1713</code></pre>
</div>
</div>
<div id="part-2" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Part 2</h2>
<div id="description-1" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Description</h3>
<article class="day-desc">
<h2 id="part2">
— Part Two —
</h2>
<p>
Considering every single measurement isn’t as useful as you expected: there’s just too much noise in the data.
</p>
<p>
Instead, consider sums of a <em>three-measurement sliding window</em>. Again considering the above example:
</p>
<pre><code>199  A      
200  A B    
208  A B C  
210    B C D
200  E   C D
207  E F   D
240  E F G  
269    F G H
260      G H
263        H
</code></pre>
<p>
Start by comparing the first and second three-measurement windows. The measurements in the first window are marked <code>A</code> (<code>199</code>, <code>200</code>, <code>208</code>); their sum is <code>199 + 200 + 208 = 607</code>. The second window is marked <code>B</code> (<code>200</code>, <code>208</code>, <code>210</code>); its sum is <code>618</code>. The sum of measurements in the second window is larger than the sum of the first, so this first comparison <em>increased</em>.
</p>
<p>
Your goal now is to count <em>the number of times the sum of measurements in this sliding window increases</em> from the previous sum. So, compare <code>A</code> with <code>B</code>, then compare <code>B</code> with <code>C</code>, then <code>C</code> with <code>D</code>, and so on. Stop when there aren’t enough measurements left to create a new three-measurement sum.
</p>
<p>
In the above example, the sum of each three-measurement window is as follows:
</p>
<pre><code>A: 607 (N/A - no previous sum)
B: 618 (<em>increased</em>)
C: 618 (no change)
D: 617 (decreased)
E: 647 (<em>increased</em>)
F: 716 (<em>increased</em>)
G: 769 (<em>increased</em>)
H: 792 (<em>increased</em>)
</code></pre>
<p>
In this example, there are <em><code>5</code></em> sums that are larger than the previous sum.
</p>
<p>
Consider sums of a three-measurement sliding window. <em>How many sums are larger than the previous sum?</em>
</p>
</article>
</div>
<div id="solution-1" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Solution</h3>
<p>Now we need to do the same but not for the single measurements, but for the consecutive
sum of 3 elements. We can conveniently use <code>zoo::rollsum</code>:</p>
<pre class="r"><code>sgn_b &lt;- data_1$depth %&gt;% 
  rollsum(3) %&gt;% 
  diff()
sum(sgn_b &gt; 0)</code></pre>
<pre><code>## [1] 1734</code></pre>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>In the following
I will refer to Advent of Code simply as <tt>AoC</tt>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Alternatively I could also look into the <tt>Network</tt> section of the
<a href="https://developer.chrome.com/docs/devtools/">DevTools of my Chrome browser</a>.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>As said, I am a
novice when it comes to authentication processes. Thus, if you know a way how I could
authenticate, please let me know, either by answering my <a href="https://stackoverflow.com/questions/70206455/log-in-a-webpage-which-uses-github-oauth">SO
question</a>,
issuing a PR on this document or by good old email.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
</div>

   
   
              </div>
  </div>
  </div>
  </div>
   
      

  <script>
    $(document).ready(function () {

		// add bootstrap table styles to pandoc tables
	$('tr.header').parent('thead').parent('table').addClass('table table-condensed');
		
 		
		$('#content img:not(.no-lightbox)').addClass("image-lb");
	$('#content').magnificPopup({
	    type:'image',
	    closeOnContentClick: false,
	    closeBtnInside: false,
	    delegate: '.image-lb',
	    gallery: {enabled: true },
	    image: {
	        verticalFit: true,
		titleSrc: 'alt'
	    }
 	});
 	    });
  </script>



  
</body>
</html>
